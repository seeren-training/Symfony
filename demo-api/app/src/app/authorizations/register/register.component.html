<ion-header>
    <ion-toolbar>
        <ion-title>Register</ion-title>
    </ion-toolbar>
</ion-header>
<ion-content class="ion-padding">
    <h1>
        <span *ngIf="!error else title">Login to the app</span>
        <ng-template #title>
            <ion-text class="ion-padding" color="danger">{{ error }}</ion-text>
        </ng-template>
    </h1>
    <form [formGroup]="form" (ngSubmit)="register()">
        <ion-item>
            <ion-label position="floating">Email</ion-label>
            <ion-input type="email" formControlName="email"></ion-input>
        </ion-item>
        <ion-text class="ion-padding" color="danger" *ngIf="form.get('email').dirty">
            <span *ngIf="form.get('email').hasError('required')">
                Email is required
            </span>
            <span *ngIf="form.get('email').hasError('email')">
                Email must be valid
            </span>
        </ion-text>
        <br />
        <ion-item>
            <ion-label position="floating">Password</ion-label>
            <ion-input type="password" formControlName="password"></ion-input>
        </ion-item>
        <ion-text class="ion-padding" color="danger"
            *ngIf="form.get('password').dirty && form.get('password').hasError('required')">
            Password is required
        </ion-text>
        <br />
        <ion-item>
            <ion-label position="floating">Confirm</ion-label>
            <ion-input type="password" formControlName="confirm"></ion-input>
        </ion-item>
        <ion-text class="ion-padding" color="danger"
            *ngIf="form.get('confirm').dirty &&  form.get('confirm').hasError('confirm')">
            Confirm must match
        </ion-text>
        <br />
        <br />
        <ion-button *ngIf="!loadingService.register else loading" type="submit" [disabled]="!form.valid">Submit
        </ion-button>
        <ng-template #loading>
            <ion-spinner name="crescent"></ion-spinner>
        </ng-template>
    </form>
</ion-content>